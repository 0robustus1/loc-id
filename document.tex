\documentclass[a4paper,11pt,DIV=25]{scrartcl}

\usepackage[utf8x]{inputenc}
\usepackage[ngerman]{babel}
\usepackage{longtable}
%\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{amsmath}
\usepackage{hyperref}
\author{Tim Reddehase}
\date{2014-09-09}

\newenvironment{oitemize}{%
  \renewcommand{\labelitemii}{$\bullet$}%
  \vspace{-15pt}
  \begin{itemize}}
  {\end{itemize}}

\begin{document}

\Huge
\begin{center}
  Ontohub loc/id\\
  \bigskip
  \includegraphics[width=0.3\textwidth]{ontohub-oor-logo.pdf}
\end{center}
\normalsize

\bigskip

\section{Idea}

Generally an ontohub loc/id (locator/identifier) is just an iri of an ontology
or one of its members (symbols, sentences, mappings, child-ontologies). However
ontohub loc/ids are generated by the ontohub application and assigned to an
ontology.  We somehow try to infer them from the path of the repository, the
path of the ontology and the specific name. Additionally we ensure that this
specific IRI is actually a locator and not \textit{just} an identifier.

\section{Status Report}

Currently ontologies have a somewhat MMT-like approach with a $?$ being used as
a separator between parent and child-ontology:

\begin{itemize}
  \item \url{http://ontohub.org/dol-testing/double_mapped_blendoid?DMB-CommonSource}
\end{itemize}

Currently this whole string of text is stored as a database field in the
ontologies-table.  This specifically includes the IRI-Schema, the hostname and
the implicit port.

\section{MMT-Style - Ontohub Edition}

Employing MMT in Ontohub would result in using $?$ as a separator (see the
Status Report).  However employing $?$ denotes the HTTP-Query-String. So
specifiying an ontology(-element) would use both the hierarchical part and part
of the query-string for IRIs.

\subsection{Examples}

\begin{tabularx}{\textwidth}{p{.1\textwidth}p{.2\textwidth}p{.7\textwidth}}
  \textit{Distributed Ontology} & & \\
  \hline
  & Distributed Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid}\\
  & Child Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid?DMB-CommonSource}\\
  & Mapping & \url{http://ontohub.org/dol-testing/double_mapped_blendoid?SomeMapping}\\
  & Symbol & \url{http://ontohub.org/dol-testing/double_mapped_blendoid?DMB-CommonSource?KitchenTable}\\
  & Sentence & \url{http://ontohub.org/dol-testing/double_mapped_blendoid?DMB-CommonSource?Ax02}\\
  & & \\
  \textit{Ontology} & & \\
  \hline
  & Distributed Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid}\\
  & Ontology & \url{http://ontohub.org/default/pizza}\\
  & Mapping & \url{http://ontohub.org/default/pizza?SomeMapping}\\
  & Symbol & \url{http://ontohub.org/default/pizza??KitchenTable}\\
  & Sentence & \url{http://ontohub.org/default/pizza??Ax02}\\
\end{tabularx}

\subsection{Conflicts in Names}

Technically the loc/id of a symbol and a sentence could conflict. Additionally
names of single ontologies in distributed ontologies (child-ontology) could
conflict with mappings.

\subsection{Benefits and Disadvantages}

The major benefit is of course that this system would be compatible with all
software products which comply with the (rather small) MMT-Standard.  Sadly
this breaks with some conventions across the web. For example data-retrieval in
different formats would solely rely on the MIME-Type of the HTTP requests
(Accept Header).

So the convention for Web-Application (and/or their APIs) to allow adding the
file-extension to a request in order to allow making file-based decision
without forcing specific Accept-Headers.

Technically we could still add this file-extension in the query-string, but
this would require special handling and still breaks the convention.

\section{Proposed Ontohub-Style}

\subsection{Examples}

\begin{tabularx}{\textwidth}{p{.1\textwidth}p{.2\textwidth}p{.7\textwidth}}
  \textit{Distributed Ontology} & & \\
  \hline
  & Distributed Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid}\\
  & Child Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid/DMB-CommonSource}\\
  & Mapping & \url{http://ontohub.org/dol-testing/double_mapped_blendoid/SomeMapping}\\
  & Symbol & \url{http://ontohub.org/dol-testing/double_mapped_blendoid/DMB-CommonSource/KitchenTable}\\
  & Sentence & \url{http://ontohub.org/dol-testing/double_mapped_blendoid/DMB-CommonSource/Ax02}\\
  & & \\
  \textit{Ontology} & & \\
  \hline
  & Distributed Ontology & \url{http://ontohub.org/dol-testing/double_mapped_blendoid}\\
  & Ontology & \url{http://ontohub.org/default/pizza}\\
  & Mapping & \url{http://ontohub.org/default/pizza/SomeMapping}\\
  & Symbol & \url{http://ontohub.org/default/pizza/Veneziana}\\
  & Sentence & \url{http://ontohub.org/default/pizza/Ax02}\\
\end{tabularx}

\subsection{Conflicts in Names}

Again the loc/id of a symbol and sentence can conflict. Additionally the
mappings can conflict with symbols and sentences as well. It would be possible
to alleviate this by prepending a hierarchical portion to determine the type of
member. This could look like this:

\begin{itemize}
  \item Mapping: \url{http://ontohub.org/default/pizza/map/SomeMapping}
  \item Symbol: \url{http://ontohub.org/default/pizza/sym/Veneziana}
  \item Sentence: \url{http://ontohub.org/default/sen/Ax02}
\end{itemize}

\subsection{Benefits and Disadvantages}

This should be completely compliant with common HTTP/Rest conventions.
So file-extensions for requiring a specific response-body-type should
be entirely possible.

Additionally it would be possible to nest other routes/controller
\textit{under} the loc/id (e.g. list of mappings for an ontology, list of
symbols/sentences, graphs and the like) - I would propose namespacing for this.

However the main disadvantage would be incompatibility with MMT.

\section{General Notes}

We could also allow multiple iris similar to the loc/id style. For version and
commits we would necessarily need to this. So we could support MMT as another
extension.

Here are some examples:

\begin{itemize}
  \item Version: \url{http://ontohub.org/default/ref/2/pizza/map/SomeMapping}
  \item Commit: \url{http://ontohub.org/default/ref/def3ab/pizza/map/SomeMapping}
  \item Branch: \url{http://ontohub.org/default/ref/master/pizza/map/SomeMapping}
  \item Date: \url{http://ontohub.org/default/ref/2014-09-07/pizza/map/SomeMapping}
  \item MMT: \url{http://ontohub.org/default/ref/mmt/pizza??SomeMapping}
  \item File: \url{http://ontohub.org/default/tree/some_directory/some_child_dir/Foo.txt}
\end{itemize}

\end{document}
